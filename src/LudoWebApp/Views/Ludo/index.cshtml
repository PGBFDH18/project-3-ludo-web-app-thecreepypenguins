@model LudoWebApp.Models.LudoViewModel
@{
    ViewData["Title"] = "Ludo Game";
    Layout = "_LudoLayout";
}

<div id="gameWrapper">
    <div class="board">
        <div class="wing" id="leftWing">
            <div class="field">52</div>
            <div class="field player2">1</div>
            <div class="field">2</div>
            <div class="field">3</div>
            <div class="field">4</div>
            <div class="field">5</div>
            <div class="field">51</div>
            <div class="field player2">1</div>
            <div class="field player2">2</div>
            <div class="field player2">3</div>
            <div class="field player2">4</div>
            <div class="field player2">5</div>
            <div class="field">50</div>
            <div class="field">49</div>
            <div class="field">48</div>
            <div class="field">47</div>
            <div class="field">46</div>
            <div class="field">45</div>
        </div>
        <div class="wing" id="rightWing">
            <div class="field">26</div>
            <div class="field player3">27</div>
            <div class="field">28</div>
            <div class="field">29</div>
            <div class="field">30</div>
            <div class="field">31</div>
            <div class="field">25</div>
            <div class="field player3">1</div>
            <div class="field player3">2</div>
            <div class="field player3">3</div>
            <div class="field player3">4</div>
            <div class="field player3">5</div>
            <div class="field">24</div>
            <div class="field">23</div>
            <div class="field">22</div>
            <div class="field">21</div>
            <div class="field">20</div>
            <div class="field">19</div>
        </div>
        <div class="wing" id="topWing">
            <div class="field">13</div>
            <div class="field player4">14</div>
            <div class="field">15</div>
            <div class="field">16</div>
            <div class="field">17</div>
            <div class="field">18</div>
            <div class="field">12</div>
            <div class="field player4">1</div>
            <div class="field player4">2</div>
            <div class="field player4">3</div>
            <div class="field player4">4</div>
            <div class="field player4">5</div>
            <div class="field">11</div>
            <div class="field">10</div>
            <div class="field">9</div>
            <div class="field">8</div>
            <div class="field">7</div>
            <div class="field">6</div>
        </div>
        <div class="wing" id="bottomWing">
            <div class="field">39</div>
            <div class="field player1">40</div>
            <div class="field">41</div>
            <div class="field">42</div>
            <div class="field">43</div>
            <div class="field">44</div>
            <div class="field">38</div>
            <div class="field player1">1</div>
            <div class="field player1">2</div>
            <div class="field player1">3</div>
            <div class="field player1">4</div>
            <div class="field player1">5</div>
            <div class="field">37</div>
            <div class="field">36</div>
            <div class="field">35</div>
            <div class="field">34</div>
            <div class="field">33</div>
            <div class="field">32</div>
        </div>

        <div class="goal"></div>
        <div class="start player1">

            <div class="field">
                <div class="brick player1"></div>
            </div>
            <div class="field">
                <div class="brick player1"></div>
            </div>
            <div class="field">
                <div class="brick player1"></div>
            </div>
            <div class="field">
                <div class="brick player1"></div>
            </div>
        </div>

        <div class="start player2">
            <div class="field">
                <div class="brick player2"></div>
            </div>
            <div class="field">
                <div class="brick player2"></div>
            </div>
            <div class="field">
                <div class="brick player2"></div>
            </div>
            <div class="field">
                <div class="brick player2"></div>
            </div>
        </div>
        <div class="start player3">
            <div class="field">
                <div class="brick player3"></div>
            </div>
            <div class="field">
                <div class="brick player3"></div>
            </div>
            <div class="field">
                <div class="brick player3"></div>
            </div>
            <div class="field">
                <div class="brick player3"></div>
            </div>
        </div>
        <div class="start player4">
            <div class="field">
                <div class="brick player4"></div>
            </div>
            <div class="field">
                <div class="brick player4"></div>
            </div>
            <div class="field">
                <div class="brick player4"></div>
            </div>
            <div class="field">
                <div class="brick player4"></div>
            </div>
        </div>
    </div>
    <div class="gameInfo">

        <div class="infoGame">
            @*Skriver ut resultatet ut till view*@
            @if (Model.AllGames != null)
            {
                foreach (var game in Model.AllGames)
                {
                    @:GameId @game.GameId, number of players: @game.Players.Count() , State: @game.GameState <br />
                }
            }

        </div>
        @if (Model.Dice > 0)
        {
            <div class="dice">
                @{
                    //Model.dice =6; // Testa tärning
                }
                @if (Model.Dice == 1)
                {
                    <div class="diceDot" id="center"></div>
                }
                else if (Model.Dice == 2)
                {
                    <div class="diceDot" id="leftUpper"></div>
                    <div class="diceDot" id="rightLower"></div>
                }
                else if (Model.Dice == 3)
                {
                    <div class="diceDot" id="leftUpper"></div>
                    <div class="diceDot" id="center"></div>
                    <div class="diceDot" id="rightLower"></div>
                }
                else if (Model.Dice == 4)
                {
                    <div class="diceDot" id="leftUpper"></div>
                    <div class="diceDot" id="leftLower"></div>
                    <div class="diceDot" id="rightUpper"></div>
                    <div class="diceDot" id="rightLower"></div>
                }
                else if (Model.Dice == 5)
                {
                    <div class="diceDot" id="leftUpper"></div>
                    <div class="diceDot" id="leftLower"></div>
                    <div class="diceDot" id="center"></div>
                    <div class="diceDot" id="rightUpper"></div>
                    <div class="diceDot" id="rightLower"></div>
                }
                else if (Model.Dice == 6)
                {
                    <div class="diceDot" id="leftUpper"></div>
                    <div class="diceDot" id="leftMiddel"></div>
                    <div class="diceDot" id="leftLower"></div>
                    <div class="diceDot" id="rightUpper"></div>
                    <div class="diceDot" id="rightMiddel"></div>
                    <div class="diceDot" id="rightLower"></div>
                }
            </div>
        }

        @*om inget spela har skapats, visa då ett formulär*@
        @if (Model.CurrentGame == null)
        {
            //Detta är ett form tag
            @using (Html.BeginForm("CreateNewGame", null, FormMethod.Post))
            {
                //Varje player är en drop down lista
                @:Player1
                @Html.DropDownList("ColorPlayer1", new List<SelectListItem>
                     {
                        new SelectListItem { Text = "", Value = "-1" },
                        new SelectListItem { Text = "Red", Value ="0" },
                        new SelectListItem { Text = "Green", Value = "1" },
                        new SelectListItem { Text = "Blue", Value = "2" },
                        new SelectListItem { Text = "Yellow", Value = "3" },
                     })
                <br />

                @:Player2
                @Html.DropDownList("ColorPlayer2", new List<SelectListItem>
                     {
                        new SelectListItem { Text = "", Value = "-1" },
                        new SelectListItem { Text = "Red", Value = "0" },
                        new SelectListItem { Text = "Green", Value = "1" },
                        new SelectListItem { Text = "Blue", Value = "2" },
                        new SelectListItem { Text = "Yellow", Value = "3" },
                     })

                <br />
                @:Player3
                @Html.DropDownList("ColorPlayer3", new List<SelectListItem>
                     {
                        new SelectListItem { Text = "", Value = "-1" },
                        new SelectListItem { Text = "Red", Value = "0" },
                        new SelectListItem { Text = "Green", Value = "1" },
                        new SelectListItem { Text = "Blue", Value = "2" },
                        new SelectListItem { Text = "Yellow", Value = "3" },
                     })
                <br />

                @:Player4
                @Html.DropDownList("ColorPlayer4", new List<SelectListItem>
                     {
                        new SelectListItem { Text = "", Value = "-1" },
                        new SelectListItem { Text = "Red", Value = "0" },
                        new SelectListItem { Text = "Green", Value = "1" },
                        new SelectListItem { Text = "Blue", Value = "2" },
                        new SelectListItem { Text = "Yellow", Value = "3" },
                     })
                <br />

                //Knappen till skapa spel
                <input type="submit" value="Create Game" />
         }
        }
            else
            {
            //Om spelet har börjat
            if (Model.CurrentGame.GameState != LudoWebApp.LudoModels.GameState.Ended)
            {
                @: Game started with id @Model.CurrentGame.GameId
                
                <div class="currentPlayer">Current player @((LudoWebApp.LudoModels.PlayerColor)Model.CurrentGame.CurrentPlayer.PlayerColor)</div>

                //Detta ligger här för att kasta tärningen knappen ska synas när spelet har startat
                @*Knapp med hjälp av Razors inbyggda html helper*@
                @Html.ActionLink("Roll dice", "RollDice", null, new { gameId = Model.CurrentGame.GameId }, new { @class = "button" });
                @foreach (var player in Model.CurrentGame.Players)
                {
                    <hr />
                    @:Player @((LudoWebApp.LudoModels.PlayerColor)player.PlayerColor)
                    <hr />

                    foreach (var piece in player.Pieces)
                    {
                        @:Piece @piece.PieceId: @piece.State position: @piece.Position
                        <br />
                    }
                }
                <br />
            }
        }
        @*// allt innanför div taggen kommer få röd text*@
        <div class="errorMessage">
            @Html.ValidationSummary()
        </div>
    </div>
</div>
